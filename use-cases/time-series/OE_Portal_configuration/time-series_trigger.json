[{"name":"Time-series sensors from opaque buffer to properties","started":true,"eventType":"lwm2m.resource.change","event":{"instanceId":"0","objectId":"33205","resourceId":"0"},"reportMode":"failure","reportUntil":"2021-06-19T12:22:02.693Z","actions":{"10":{"type":"hex.decode","params":{"input":"$(action.6.value.data)"},"canvas":{"failure":"failure-end1","left":"446","top":"458"},"routes":{"failure":"$endFailure","success":"11"}},"11":{"type":"binary.decode","params":{"byteOrder":"bigEndian","input":"$(action.10.value)","rules":"{\n \"timestamp\" : {\"offset\":0, \"type\":\"UINT4\", \"count\":1},\n \"temperature\" : {\"offset\":4, \"type\":\"FLOAT4\", \"count\":1},\n \"humidity\" : {\"offset\":8, \"type\":\"UINT1\", \"count\":1},\n \"pressure\" : {\"offset\":9, \"type\":\"UINT2\", \"count\":1},\n \"engine_rot\" : {\"offset\":11, \"type\":\"UINT2\", \"count\":1},\n \"event_counter\" : {\"offset\":13, \"type\":\"UINT1\", \"count\":1}\n}"},"canvas":{"failure":"failure-end1","left":"446","top":"528"},"routes":{"failure":"$endFailure","success":"17"}},"12":{"type":"property.publish","params":{"propKey":"prop_temperature","thingKey":"$(event.thing.key)","ts":"$(action.17.timestamp)","value":"$(action.11.value.temperature)"},"canvas":{"failure":"failure-end1","left":"827","top":"689"},"routes":{"failure":"$endFailure","success":"13"}},"13":{"type":"property.publish","params":{"propKey":"prop_humidity","thingKey":"$(event.thing.key)","ts":"$(action.17.timestamp)","value":"$(action.11.value.humidity)"},"canvas":{"failure":"failure-end1","left":"827","top":"748"},"routes":{"failure":"$endFailure","success":"14"}},"14":{"type":"property.publish","params":{"propKey":"prop_pressure","thingKey":"$(event.thing.key)","ts":"$(action.17.timestamp)","value":"$(action.11.value.pressure)"},"canvas":{"failure":"failure-end1","left":"827","top":"808"},"routes":{"failure":"$endFailure","success":"15"}},"15":{"type":"property.publish","params":{"propKey":"prop_engine_rotations","thingKey":"$(event.thing.key)","ts":"$(action.17.timestamp)","value":"$(action.11.value.engine_rot)"},"canvas":{"failure":"failure-end1","left":"827","top":"873"},"routes":{"failure":"$endFailure","success":"16"}},"16":{"type":"property.publish","params":{"propKey":"prop_event_counter","thingKey":"$(event.thing.key)","ts":"$(action.17.timestamp)","value":"$(action.11.value.event_counter)"},"canvas":{"failure":"failure-end1","left":"827","top":"941"},"routes":{"failure":"$endFailure","success":"7"}},"17":{"type":"time.fromint","params":{"seconds":"$(action.11.value.timestamp)"},"canvas":{"failure":"failure-end1","left":"827","top":"632"},"routes":{"failure":"$endFailure","success":"12"}},"4":{"type":"hex.encode","params":{"input":"$(event.value)"},"canvas":{"failure":"failure-end1","left":"140","top":"176"},"routes":{"failure":"$endFailure","success":"5"}},"5":{"type":"trigger.var.set","params":{"name":"data","value":"$(action.4.value)"},"canvas":{"failure":"failure-end1","left":"140","top":"260"},"routes":{"failure":"$endFailure","success":"6"}},"6":{"type":"string.range","params":{"fields":[{"key":"data","value":"0,28"},{"key":"rest","value":"28"}],"input":"$(data)"},"canvas":{"failure":"failure-end1","left":"446","top":"391"},"routes":{"failure":"$endFailure","success":"10"}},"7":{"type":"trigger.var.set","params":{"name":"data","value":"$(action.6.value.rest)"},"canvas":{"failure":"failure-end0","left":"446","top":"1091"},"routes":{"failure":"$endFailure","success":"8"}},"8":{"type":"string.compare","params":{"comparison":"is_empty","string1":"$(data)"},"canvas":{"diamond_failure":"failure-end0","left":"214","top":"1181","true":"success-end0"},"routes":{"failure":"$endFailure","false":"6","true":"$endSuccess"}}},"firstAction":"4","canvas":{"comments":[{"body":"example of 2 dummy sample sets: AT#LWM2MSET=3,33205,0,0,0,\"60A53A4841C8CCCD5003F502587B60A548584201333340030502283C\"","canvas":{"color":"yellow_bk","height":"58","left":"383","top":"73","width":"697"}},{"body":"precondition:\r\nobservation on 33205\/0\/0","canvas":{"color":"yellow_bk","height":"53","left":"87","top":"-25","width":"252"}},{"body":"convert from\r\nBase64: YKU6SEHIzM1QA\/UCWHtgpUhYQgEzM0ADBQIoPA==          \r\nto\r\nhex string: 60a53a4841c8cccd5003f502587b60a548584201333340030502283c","canvas":{"color":"yellow_bk","height":"97","left":"383","top":"158.37228211087077","width":"398"}},{"body":"move hex string 60a53a4841c8cccd5003f502587b60a548584201333340030502283c to temporary variable $(data)","canvas":{"color":"yellow_bk","height":"60","left":"383","top":"257","width":"490"}},{"body":"extract the first part (first 28 characters) from the string 60a53a4841c8cccd5003f502587b60a548584201333340030502283c.........\r\n\r\ndata=60a53a4841c8cccd5003f502587b\r\nrest=60a548584201333340030502283c.........\r\n","canvas":{"color":"yellow_bk","height":"94","left":"653","top":"328","width":"431"}},{"body":"convert from\r\nhex string: 60a53a4841c8cccd5003f502587b\r\nto binary format","canvas":{"color":"yellow_bk","height":"50","left":"653","top":"450","width":"433"}},{"body":"decode the sample set according to sensor values ","canvas":{"color":"yellow_bk","height":"50","left":"653","top":"519","width":"377"}},{"body":"time : 1619712365\r\ntemperature : 25.1\r\nhumidity : 80\r\npressure : 1013\r\nengine_rot : 600\r\nevent_counter : 123\r\npublish one by one to properties\r\n\r\n","canvas":{"color":"yellow_bk","height":"220","left":"662","top":"627","width":"148"}},{"body":"move rest to $(data) to run the same actions on the rest of the buffer","canvas":{"color":"yellow_bk","height":"84","left":"671","top":"1059","width":"180"}},{"body":"if rest contains other sample sets, analyse them one by one from the beginning, until all the sample sets are analysed","canvas":{"color":"yellow_bk","height":"93","left":"224","top":"1303","width":"239"}},{"body":"example of a sample set with dummy values:.............................................\r\nTimestamp (4B)=2021\/04\/29 16:06:05 UTC=1619712365=0x608AD96D...\r\nTemperature (4B)=25.1 \u00b0C=0x41C8CCCD...................................................\r\nHumidity (1B)=80% RH=0x50.......................................................................\r\nPressure (2B)=1013 mbar=0x03F5..............................................................\r\nEngine rotations (2B)=600=0x0258..............................................................\r\nEvent counter (1B)=123=0x7B.....................................................................\r\nThe opaque buffer =608AD96D41C8CCCD5003F502587B","canvas":{"color":"yellow_bk","height":"166","left":"383","top":"-103","width":"435"}}],"event":{"left":"151","top":"67"},"failure-end":[{"left":"285","top":"1421"},{"left":"139","top":"1055"}],"success-end":[{"left":"511","top":"1420"}]},"dailySuccessCount":0,"dailyFailureCount":0,"execTime":638226}]